(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1630:function(e,t,a){Promise.resolve().then(a.bind(a,4289))},4289:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return H}});var s=a(7437),r=a(2265);let l=["BTC","ETH","SOL","XRP"],n={status:"stopped",connection:"disconnected",lastAction:"Idle",lastActionTime:null,currentMarket:null,currentPosition:null,settings:{paperTrading:!0,maxTotalExposure:30,dailyLossLimit:10,lossLimit:5,enabledAssets:["BTC"],highConfEntryMin:.9,highConfEntryMax:.95,highConfTimeMin:30,highConfTimeMax:480,highConfEnabled:!1,highConfBuyAmount:.1,highConfBuyInterval:5,arbEnabled:!1,arbMaxPerWindow:10,arbBudgetUp:null,arbBudgetDown:null,arbLadderLevels:[{price:.48,allocation:.4},{price:.46,allocation:.35},{price:.44,allocation:.25}],arbMaxCombinedCost:.97,arbCancelBeforeEnd:120,arbMarket:"BTC",scalpEnabled:!0,scalpTradeSize:12,scalpMaxPositions:2,scalpMinGap:.02,scalpProfitTarget:.02,scalpEntryMin:.15,scalpEntryMax:.85,scalpExitWindow:120,scalpHalfSizeAfter:420,valueEnabled:!0,valueTradeSize:15,valueMaxPositions:1,valueMinGap:.03,valueProfitTarget:.03,valueEntryMin:.2,valueEntryMax:.8,valueExitWindow:60,valueMaxSecondsRemaining:480},cumulativePnl:0,totalTrades:0,activeMarkets:{},positions:{},capital:{totalBankroll:30,deployed:0,available:30,maxExposure:30,todayPnl:0,winStreak:0,totalLosses:0},circuitBreaker:{triggered:!1,reason:null,resumeAt:null,dailyPnl:0,totalLosses:0},clobReady:!1,alerts:[],arbState:null,walletBalance:null,walletAddress:null,arbStats:{windowsPlayed:0,bothSidesFilled:0,oneSideFilled:0,neitherFilled:0,totalPnl:0,avgProfitPerWindow:0},scalp:{binancePrice:0,windowOpenPrice:0,btcChangePercent:0,fairValue:{up:.5,down:.5},positions:[],pendingBuys:[],cooldownUntil:0}};function i(e){let{botStatus:t,connection:a,sseConnected:r,lastAction:l,lastActionTime:n,paperTrading:i,cumulativePnl:d,totalTrades:c,clobReady:o,walletBalance:x,walletAddress:p,onSettingsClick:m}=e,h="running"===t;return(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-[#0c0e12] border-b border-white/[0.04]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-[13px] font-bold tracking-tight text-gray-100",children:["POLY",(0,s.jsx)("span",{className:"text-blue-400",children:"BOT"})]}),(0,s.jsx)("div",{className:"w-px h-3.5 bg-white/[0.06]"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full ".concat(h?"bg-emerald-400 pulse-dot":"error"===t?"bg-red-400":"bg-gray-600")}),(0,s.jsx)("span",{className:"text-[11px] text-gray-400 capitalize",children:t})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-1 h-1 rounded-full ".concat(r?"bg-emerald-400":"bg-gray-600")}),(0,s.jsx)("span",{className:"text-[10px] text-gray-600",children:r?"Live":"Off"})]}),(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold tracking-wider ".concat(i?"bg-amber-400/10 text-amber-400":"bg-red-400/10 text-red-400"),children:i?"PAPER":"LIVE"}),!i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-px h-3.5 bg-white/[0.06]"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",title:"Polymarket CLOB API",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full ".concat(o?"bg-emerald-400":"bg-red-400")}),(0,s.jsx)("span",{className:"text-[9px] text-gray-600",children:"CLOB"})]})]}),null!==x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-px h-3.5 bg-white/[0.06]"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",title:p||"Wallet",children:[(0,s.jsxs)("span",{className:"mono text-[11px] font-bold text-gray-200",children:["$",x.toFixed(2)]}),p&&(0,s.jsxs)("span",{className:"text-[9px] text-gray-600",children:[p.slice(0,4),"..",p.slice(-3)]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-[10px] text-gray-600",children:"P&L"}),(0,s.jsxs)("span",{className:"mono text-[12px] font-bold ".concat(d>=0?"text-emerald-400":"text-red-400"),children:[d>=0?"+":"","$",d.toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-px h-3.5 bg-white/[0.06]"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-[10px] text-gray-600",children:"Trades"}),(0,s.jsx)("span",{className:"mono text-[11px] text-gray-300",children:c})]}),(0,s.jsx)("div",{className:"w-px h-3.5 bg-white/[0.06]"}),(0,s.jsxs)("span",{className:"text-[10px] text-gray-600 max-w-[160px] truncate",children:[l,n&&(0,s.jsx)("span",{className:"ml-1 text-gray-700",children:new Date(n).toLocaleTimeString()})]}),m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-px h-3.5 bg-white/[0.06]"}),(0,s.jsxs)("button",{onClick:m,className:"flex items-center gap-1 px-2.5 py-1 rounded-lg text-gray-400 hover:text-gray-200 bg-white/[0.03] hover:bg-white/[0.06] border border-white/[0.06] hover:border-white/[0.1] transition-all duration-200",title:"Settings",children:[(0,s.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"2.5"}),(0,s.jsx)("path",{d:"M13.5 8a5.5 5.5 0 01-.3 1.8l1.3.7-1 1.7-1.3-.7a5.5 5.5 0 01-1.5 1l.1 1.5h-2l.1-1.5a5.5 5.5 0 01-1.5-1l-1.3.7-1-1.7 1.3-.7A5.5 5.5 0 012.5 8a5.5 5.5 0 01.3-1.8l-1.3-.7 1-1.7 1.3.7a5.5 5.5 0 011.5-1L5 2h2l-.1 1.5a5.5 5.5 0 011.5 1l1.3-.7 1 1.7-1.3.7A5.5 5.5 0 0113.5 8z"})]}),(0,s.jsx)("span",{className:"text-[10px] font-medium",children:"Settings"})]})]})]})]})}function d(e){let{status:t,settings:a,onStart:l,onStop:n,enabledAssets:i}=e,[d,o]=(0,r.useState)(!1),x="running"===t,p=!a.paperTrading,m=async()=>{o(!0);try{x?await n():await l()}catch(e){console.error(e)}o(!1)};return(0,s.jsx)("div",{className:"bg-[#111318] rounded-xl border p-3 ".concat(p?"border-red-500/15":"border-white/[0.04]"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full transition-colors ".concat(x?"bg-emerald-400 pulse-dot shadow-[0_0_8px_rgba(16,185,129,0.4)]":"error"===t?"bg-red-400":"bg-gray-700")}),(0,s.jsx)("span",{className:"text-[11px] font-semibold capitalize text-gray-300",children:t})]}),(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold tracking-wider ".concat(p?"bg-red-500/10 text-red-400":"bg-amber-400/10 text-amber-400"),children:p?"LIVE":"PAPER"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[(0,s.jsx)(c,{label:"Strategy",value:"Scalp"}),(0,s.jsx)(c,{label:"Size",value:"$".concat(a.scalpTradeSize)}),(0,s.jsx)(c,{label:"Gap",value:"$".concat(a.scalpMinGap)}),(0,s.jsx)(c,{label:"Entry",value:"".concat(a.scalpEntryMin,"-").concat(a.scalpEntryMax)}),(0,s.jsx)(c,{label:"Positions",value:"".concat(a.scalpMaxPositions)})]}),(0,s.jsx)("button",{onClick:m,disabled:d,className:"px-5 py-1.5 rounded-lg text-[11px] font-bold tracking-wide transition-all duration-200 flex-shrink-0 ".concat(x?"bg-red-500/10 text-red-400 border border-red-500/15 hover:bg-red-500/20":"bg-emerald-500/10 text-emerald-400 border border-emerald-500/15 hover:bg-emerald-500/20"," ").concat(d?"opacity-40 cursor-not-allowed":""),children:d?(0,s.jsx)("span",{className:"inline-block w-3 h-3 border-[1.5px] border-current border-t-transparent rounded-full animate-spin"}):x?"STOP":"START"})]})})}function c(e){let{label:t,value:a}=e;return(0,s.jsxs)("div",{className:"px-2 py-1 rounded-md bg-white/[0.02] border border-white/[0.04]",children:[(0,s.jsx)("span",{className:"text-[7px] text-gray-600 uppercase tracking-wider",children:t}),(0,s.jsx)("span",{className:"mono text-[10px] font-semibold text-gray-300 ml-1",children:a})]})}function o(e){let{capital:t,circuitBreaker:a}=e,r=t.maxExposure>0?t.deployed/t.maxExposure*100:0;return(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h2",{className:"text-[10px] font-semibold text-gray-500 uppercase tracking-widest",children:"Capital"}),a.triggered?(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-red-500/10 text-red-400 animate-pulse",children:"BREAKER"}):(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-emerald-500/10 text-emerald-400",children:"ARMED"})]}),(0,s.jsxs)("div",{className:"text-center py-2 mb-2 rounded-lg bg-white/[0.015] border border-white/[0.04]",children:[(0,s.jsx)("p",{className:"text-[8px] text-gray-600 mb-0.5",children:"Today's P&L"}),(0,s.jsxs)("p",{className:"mono text-[22px] font-bold tracking-tight leading-none ".concat(t.todayPnl>=0?"text-emerald-400":"text-red-400"),children:[t.todayPnl>=0?"+":"","$",t.todayPnl.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-1.5 mb-2",children:[(0,s.jsx)(x,{label:"Max",value:"$".concat(t.maxExposure.toFixed(0))}),(0,s.jsx)(x,{label:"Deployed",value:"$".concat(t.deployed.toFixed(2)),color:"text-amber-400"}),(0,s.jsx)(x,{label:"Available",value:"$".concat(t.available.toFixed(2)),color:"text-emerald-400"})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-[8px] text-gray-600 mb-1",children:[(0,s.jsx)("span",{children:"Exposure"}),(0,s.jsxs)("span",{className:"mono",children:[r.toFixed(0),"%"]})]}),(0,s.jsx)("div",{className:"w-full h-1 rounded-full bg-white/[0.04] overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all duration-700 ".concat(r>80?"bg-red-500/80":r>50?"bg-amber-500/60":"bg-emerald-500/60"),style:{width:"".concat(Math.min(100,r),"%")}})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-[10px] border-t border-white/[0.04] pt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Wins"}),(0,s.jsx)("span",{className:"mono font-bold ".concat(t.winStreak>0?"text-emerald-400":"text-gray-600"),children:t.winStreak})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Losses"}),(0,s.jsx)("span",{className:"mono font-bold ".concat(t.totalLosses>3?"text-red-400":"text-gray-600"),children:t.totalLosses})]})]})]})}function x(e){let{label:t,value:a,color:r}=e;return(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-[7px] text-gray-600 uppercase",children:t}),(0,s.jsx)("p",{className:"mono text-[11px] font-bold ".concat(r||"text-gray-200"),children:a})]})}var p=a(4298);function m(e){let{currentPrice:t,openPrice:a,height:l=120}=e,n=(0,r.useRef)(null),i=(0,r.useRef)(null),d=(0,r.useRef)(null),c=(0,r.useRef)(null),o=(0,r.useRef)([]),x=(0,r.useRef)(0);(0,r.useEffect)(()=>{if(!n.current)return;let e=(0,p.C2)(n.current,{width:n.current.clientWidth,height:l,layout:{background:{type:p.Mr.Solid,color:"transparent"},textColor:"#4b5060",fontSize:10,fontFamily:"'JetBrains Mono', monospace"},grid:{vertLines:{visible:!1},horzLines:{color:"rgba(255,255,255,0.03)",style:p.TD.Dotted}},rightPriceScale:{borderVisible:!1,scaleMargins:{top:.1,bottom:.1}},timeScale:{borderVisible:!1,timeVisible:!0,secondsVisible:!0,rightOffset:5,barSpacing:3,fixLeftEdge:!1,fixRightEdge:!0},crosshair:{vertLine:{color:"rgba(255,255,255,0.08)",width:1,style:p.TD.Dashed,labelVisible:!1},horzLine:{color:"rgba(255,255,255,0.08)",width:1,style:p.TD.Dashed}},handleScroll:!1,handleScale:!1}),t=e.addSeries(p.f6,{lineColor:"#3b82f6",topColor:"rgba(59,130,246,0.15)",bottomColor:"rgba(59,130,246,0.01)",lineWidth:2,crosshairMarkerVisible:!0,crosshairMarkerRadius:3,priceFormat:{type:"price",precision:2,minMove:.01}}),a=e.addSeries(p.eh,{color:"rgba(255,255,255,0.12)",lineWidth:1,lineStyle:p.TD.Dashed,crosshairMarkerVisible:!1,priceLineVisible:!1,lastValueVisible:!1});i.current=e,d.current=t,c.current=a;let s=new ResizeObserver(()=>{n.current&&e.applyOptions({width:n.current.clientWidth})});return s.observe(n.current),()=>{s.disconnect(),e.remove(),i.current=null,d.current=null,c.current=null}},[l]);let m=(0,r.useCallback)((e,t)=>{if(!d.current||e<=0)return;let a=Math.floor(Date.now()/1e3),s=e>=t;d.current.applyOptions({lineColor:s?"#22c55e":"#ef4444",topColor:s?"rgba(34,197,94,0.12)":"rgba(239,68,68,0.12)",bottomColor:s?"rgba(34,197,94,0.01)":"rgba(239,68,68,0.01)"});let r={time:a,value:e};o.current.push(r),o.current.length>600&&(o.current=o.current.slice(-600));try{d.current.update(r)}catch(e){d.current.setData(o.current)}if(c.current&&t>0&&o.current.length>=2){let e=o.current[0],a=o.current[o.current.length-1];c.current.setData([{time:e.time,value:t},{time:a.time,value:t}])}x.current=e},[]);return(0,r.useEffect)(()=>{m(t,a)},[t,a,m]),(0,s.jsx)("div",{ref:n,className:"w-full",style:{height:l}})}function h(e){var t,a,l;let{activeMarkets:n,scalp:i,settings:d,recentOutcomes:c}=e,[,o]=(0,r.useState)(0),x=(0,r.useRef)(0),[p,h]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=setInterval(()=>o(e=>e+1),1e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{if(i.binancePrice>0&&x.current>0){i.binancePrice>x.current?h("price-up"):i.binancePrice<x.current&&h("price-down");let e=setTimeout(()=>h(""),600);return()=>clearTimeout(e)}},[i.binancePrice]),(0,r.useEffect)(()=>{x.current=i.binancePrice},[i.binancePrice]);let b=n.BTC,u=null!==(t=null==b?void 0:b.secondsRemaining)&&void 0!==t?t:0,g=u<120,j=u<300,f=100*i.btcChangePercent,y=b?i.fairValue.up-b.yesPrice:0,v=b?i.fairValue.down-b.noPrice:0,N=y>=d.scalpMinGap&&b&&b.yesPrice>=d.scalpEntryMin&&b.yesPrice<=d.scalpEntryMax,w=v>=d.scalpMinGap&&b&&b.noPrice>=d.scalpEntryMin&&b.noPrice<=d.scalpEntryMax,k=(0,r.useMemo)(()=>c.slice(0,16),[c]);return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[(0,s.jsxs)("div",{className:"col-span-12 lg:col-span-6 bg-[#111318] rounded-xl border border-white/[0.04] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between p-3 pb-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full ".concat(i.binancePrice>0?"bg-emerald-400 pulse-dot":"bg-gray-600")}),(0,s.jsx)("span",{className:"text-[9px] text-gray-500 font-semibold uppercase tracking-widest",children:"BTC/USD"})]}),(0,s.jsxs)("div",{className:"mono text-[22px] font-bold text-gray-100 leading-none ".concat(p),children:["$",i.binancePrice>0?i.binancePrice.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"---"]},"p-".concat(i.binancePrice)),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("span",{className:"mono text-[11px] font-bold ".concat(.05>Math.abs(f)?"text-gray-500":f>0?"text-emerald-400":"text-red-400"),children:[f>=0?"+":"-"," ",Math.abs(f).toFixed(3),"%"]}),(0,s.jsx)("span",{className:"text-[9px] text-gray-600",children:"vs open"}),(0,s.jsxs)("span",{className:"mono text-[10px] text-gray-500",children:["$",i.windowOpenPrice>0?i.windowOpenPrice.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"---"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 uppercase tracking-wider",children:"Window"}),(0,s.jsxs)("div",{className:"mono text-[16px] font-bold leading-none mt-0.5 ".concat(g?"text-red-400":j?"text-amber-400":"text-gray-200"),children:[Math.floor(u/60),":",(u%60).toString().padStart(2,"0")]}),(0,s.jsx)("div",{className:"mt-1 w-16 h-[3px] bg-white/[0.04] rounded-full overflow-hidden ml-auto",children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all duration-1000 ".concat(g?"bg-red-400":j?"bg-amber-400":"bg-blue-400"),style:{width:"".concat(Math.max(0,100-u/900*100),"%")}})})]})]}),(0,s.jsx)("div",{className:"px-1 -mt-1",children:(0,s.jsx)(m,{currentPrice:i.binancePrice,openPrice:i.windowOpenPrice,height:100})})]}),(0,s.jsxs)("div",{className:"col-span-6 lg:col-span-3 bg-[#111318] rounded-xl p-3 border transition-all duration-300 ".concat(N?"border-emerald-500/30 bg-emerald-500/[0.03] signal-buy-up":"border-white/[0.04]"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,s.jsx)("span",{className:"text-[9px] text-gray-500 font-semibold uppercase tracking-widest",children:"UP (Yes)"}),N&&(0,s.jsx)("span",{className:"text-[8px] font-bold text-emerald-400 bg-emerald-400/15 px-1.5 py-0.5 rounded animate-pulse",children:"BUY"})]}),(0,s.jsxs)("div",{className:"mono text-[22px] font-bold text-emerald-400 leading-none",children:["$",null!==(a=null==b?void 0:b.yesPrice.toFixed(2))&&void 0!==a?a:"---"]}),(0,s.jsxs)("div",{className:"mt-2 space-y-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-[9px] text-gray-600",children:"Fair"}),(0,s.jsxs)("span",{className:"mono text-[10px] text-gray-400",children:["$",i.fairValue.up.toFixed(3)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-[9px] text-gray-600",children:"Gap"}),(0,s.jsxs)("span",{className:"mono text-[10px] font-semibold ".concat(y>=d.scalpMinGap?"text-emerald-400":"text-gray-600"),children:[y>=0?"+":"",(100*y).toFixed(1),"c"]})]})]})]}),(0,s.jsxs)("div",{className:"col-span-6 lg:col-span-3 bg-[#111318] rounded-xl p-3 border transition-all duration-300 ".concat(w?"border-red-500/30 bg-red-500/[0.03] signal-buy-down":"border-white/[0.04]"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,s.jsx)("span",{className:"text-[9px] text-gray-500 font-semibold uppercase tracking-widest",children:"DOWN (No)"}),w&&(0,s.jsx)("span",{className:"text-[8px] font-bold text-red-400 bg-red-400/15 px-1.5 py-0.5 rounded animate-pulse",children:"BUY"})]}),(0,s.jsxs)("div",{className:"mono text-[22px] font-bold text-red-400 leading-none",children:["$",null!==(l=null==b?void 0:b.noPrice.toFixed(2))&&void 0!==l?l:"---"]}),(0,s.jsxs)("div",{className:"mt-2 space-y-0.5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-[9px] text-gray-600",children:"Fair"}),(0,s.jsxs)("span",{className:"mono text-[10px] text-gray-400",children:["$",i.fairValue.down.toFixed(3)]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-[9px] text-gray-600",children:"Gap"}),(0,s.jsxs)("span",{className:"mono text-[10px] font-semibold ".concat(v>=d.scalpMinGap?"text-red-400":"text-gray-600"),children:[v>=0?"+":"",(100*v).toFixed(1),"c"]})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[(0,s.jsxs)("div",{className:"col-span-12 lg:col-span-8",children:[i.positions.length>0?(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-3 py-2 border-b border-white/[0.04] flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-[10px] font-semibold text-gray-500 uppercase tracking-widest",children:"Positions"}),(0,s.jsxs)("span",{className:"text-[9px] text-gray-600 mono",children:[i.positions.length," active"]})]}),(0,s.jsx)("div",{className:"divide-y divide-white/[0.03]",children:i.positions.map(e=>(0,s.jsxs)("div",{className:"px-3 py-2 flex items-center gap-3 hover:bg-white/[0.01] transition-colors",children:[(0,s.jsx)("span",{className:"text-[9px] font-bold px-1.5 py-0.5 rounded ".concat("yes"===e.side?"text-emerald-400 bg-emerald-400/10":"text-red-400 bg-red-400/10"),children:"yes"===e.side?"UP":"DN"}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-5 gap-2 items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 block",children:"Entry"}),(0,s.jsxs)("span",{className:"mono text-[11px] text-gray-300",children:["$",e.entryPrice.toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 block",children:"Now"}),(0,s.jsxs)("span",{className:"mono text-[11px] text-gray-300",children:["$",e.currentPrice.toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 block",children:"Target"}),(0,s.jsxs)("span",{className:"mono text-[11px] text-gray-300",children:["$",e.sellPrice.toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 block",children:"P&L"}),(0,s.jsxs)("span",{className:"mono text-[11px] font-bold ".concat(e.unrealizedPnl>=0?"text-emerald-400":"text-red-400"),children:[e.unrealizedPnl>=0?"+":"","$",e.unrealizedPnl.toFixed(4)]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("span",{className:"mono text-[10px] text-gray-600",children:[e.shares.toFixed(1)," sh"]})})]})]},e.id))})]}):i.pendingBuys.length>0?(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-amber-500/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-3 py-2 border-b border-white/[0.04] flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"}),(0,s.jsx)("span",{className:"text-[10px] font-semibold text-gray-500 uppercase tracking-widest",children:"Pending"})]}),(0,s.jsx)("div",{className:"divide-y divide-white/[0.03]",children:i.pendingBuys.map(e=>(0,s.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-[9px] font-bold ".concat("yes"===e.side?"text-emerald-400":"text-red-400"),children:["BUY ","yes"===e.side?"UP":"DN"]}),(0,s.jsxs)("span",{className:"mono text-[11px] text-gray-300",children:["$",e.price.toFixed(2)]}),(0,s.jsxs)("span",{className:"mono text-[10px] text-gray-600",children:[e.size.toFixed(1)," sh"]})]}),(0,s.jsx)("span",{className:"text-[9px] text-amber-400/60 animate-pulse",children:"waiting"})]},e.orderId))})]}):(0,s.jsx)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] flex items-center justify-center py-6",children:(0,s.jsx)("span",{className:"text-[11px] text-gray-600",children:"No active positions"})}),i.positions.length>0&&i.pendingBuys.length>0&&(0,s.jsx)("div",{className:"bg-[#111318] rounded-xl border border-amber-500/10 overflow-hidden mt-2",children:(0,s.jsxs)("div",{className:"px-3 py-1.5 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"}),(0,s.jsx)("span",{className:"text-[9px] font-semibold text-gray-500 uppercase",children:"Pending"}),i.pendingBuys.map(e=>(0,s.jsxs)("span",{className:"text-[9px] font-bold ".concat("yes"===e.side?"text-emerald-400":"text-red-400"),children:["yes"===e.side?"UP":"DN"," $",e.price.toFixed(2)]},e.orderId))]})})]}),(0,s.jsx)("div",{className:"col-span-12 lg:col-span-4",children:k.length>0?(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-3 h-full",children:[(0,s.jsx)("div",{className:"text-[10px] font-semibold text-gray-500 uppercase tracking-widest mb-2",children:"Recent Windows"}),(0,s.jsx)("div",{className:"flex gap-1 flex-wrap",children:k.map(e=>(0,s.jsxs)("div",{className:"px-1.5 py-0.5 rounded text-[9px] font-semibold transition-all ".concat("up"===e.result?"bg-emerald-400/10 text-emerald-400":"down"===e.result?"bg-red-400/10 text-red-400":"bg-white/[0.04] text-gray-600 animate-pulse"),children:[e.endTime," ","pending"===e.result?"?":"up"===e.result?"UP":"DN"]},e.slug))})]}):(0,s.jsx)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-3 h-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-[10px] text-gray-600",children:"No window history"})})})]}),i.cooldownUntil>900*Math.floor(Date.now()/1e3/900)&&(0,s.jsxs)("div",{className:"bg-amber-500/[0.04] border border-amber-500/10 rounded-lg px-3 py-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"}),(0,s.jsx)("span",{className:"text-[10px] text-amber-400 font-medium",children:"Cooldown active - skipping entries after loss"})]})]})}var b=a(7625),u=a(1156),g=a(6940),j=a(7059),f=a(2994),y=a(8147),v=a(4962),N=a(4061),w=a(7031),k=a(1699),S=a(407);function C(e){let{data:t,dailyData:a=[]}=e,[l,n]=(0,r.useState)("7d"),i=(0,r.useMemo)(()=>{if("all"===l||0===t.length)return t;let e=Date.now(),a={"24h":e-864e5,"7d":e-6048e5,"30d":e-2592e6}[l];return t.filter(e=>new Date(e.timestamp).getTime()>=a)},[t,l]),d=(i.length>0?i[i.length-1].cumulativePnl:0)>=0?"#22c55e":"#ef4444",c=i.map(e=>({...e,time:new Date(e.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})),o=t.length>0?t[t.length-1].cumulativePnl:0,x=t.length,p=t.filter(e=>e.pnl>0).length,m=x>0?p/x*100:0,h=x>0?o/x:0,C=a.length>0?Math.max(...a.map(e=>e.pnl)):0,T=a.length>0?Math.min(...a.map(e=>e.pnl)):0;return(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h2",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-widest",children:"P&L"}),(0,s.jsx)("div",{className:"flex gap-1",children:["24h","7d","30d","all"].map(e=>(0,s.jsx)("button",{onClick:()=>n(e),className:"px-2 py-0.5 rounded text-[10px] font-medium transition-colors ".concat(l===e?"bg-accent-blue/15 text-accent-blue":"text-gray-600 hover:text-gray-400"),children:e.toUpperCase()},e))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2 mb-3",children:[(0,s.jsx)(P,{label:"Total P&L",value:"$".concat(o.toFixed(4)),color:o>=0?"text-accent-green":"text-accent-red"}),(0,s.jsx)(P,{label:"Win Rate",value:"".concat(m.toFixed(0),"%"),color:m>=50?"text-accent-green":"text-accent-red"}),(0,s.jsx)(P,{label:"Trades",value:String(x)}),(0,s.jsx)(P,{label:"Avg/Trade",value:"$".concat(h.toFixed(4)),color:h>=0?"text-accent-green":"text-accent-red"}),(0,s.jsx)(P,{label:"Best Day",value:"$".concat(C.toFixed(4)),color:"text-accent-green"}),(0,s.jsx)(P,{label:"Worst Day",value:"$".concat(T.toFixed(4)),color:"text-accent-red"})]}),c.length<2?(0,s.jsx)("div",{className:"flex items-center justify-center h-[200px] text-gray-600 text-[13px]",children:"Waiting for trade data..."}):(0,s.jsx)(b.h,{width:"100%",height:200,children:(0,s.jsxs)(u.w,{data:c,margin:{top:4,right:8,left:4,bottom:4},children:[(0,s.jsx)(g.q,{strokeDasharray:"3 3",stroke:"#1f232e",vertical:!1}),(0,s.jsx)(j.K,{dataKey:"time",tick:{fill:"#4b5060",fontSize:10},tickLine:!1,axisLine:{stroke:"#1f232e"}}),(0,s.jsx)(f.B,{tick:{fill:"#4b5060",fontSize:10},tickLine:!1,axisLine:!1,tickFormatter:e=>"$".concat(e.toFixed(2)),width:50}),(0,s.jsx)(y.u,{contentStyle:{backgroundColor:"#111318",border:"1px solid #1f232e",borderRadius:"8px",color:"#e2e5eb",fontSize:12,padding:"8px 12px"},formatter:e=>["$".concat(e.toFixed(4)),"P&L"],labelStyle:{color:"#6b7280",fontSize:11}}),(0,s.jsx)(v.d,{y:0,stroke:"#1f232e",strokeDasharray:"3 3"}),(0,s.jsx)(N.x,{type:"monotone",dataKey:"cumulativePnl",stroke:d,strokeWidth:1.5,dot:!1,activeDot:{r:3,fill:d,stroke:"#111318",strokeWidth:2}})]})}),a.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-[10px] text-gray-600 uppercase tracking-wide mb-2",children:"Daily P&L"}),(0,s.jsx)(b.h,{width:"100%",height:100,children:(0,s.jsxs)(w.v,{data:a,margin:{top:4,right:8,left:4,bottom:4},children:[(0,s.jsx)(g.q,{strokeDasharray:"3 3",stroke:"#1f232e",vertical:!1}),(0,s.jsx)(j.K,{dataKey:"date",tick:{fill:"#4b5060",fontSize:9},tickLine:!1,axisLine:{stroke:"#1f232e"},tickFormatter:e=>e.slice(5)}),(0,s.jsx)(f.B,{tick:{fill:"#4b5060",fontSize:9},tickLine:!1,axisLine:!1,tickFormatter:e=>"$".concat(e.toFixed(2)),width:45}),(0,s.jsx)(y.u,{contentStyle:{backgroundColor:"#111318",border:"1px solid #1f232e",borderRadius:"8px",color:"#e2e5eb",fontSize:11,padding:"6px 10px"},formatter:e=>["$".concat(e.toFixed(4)),"P&L"]}),(0,s.jsx)(v.d,{y:0,stroke:"#1f232e"}),(0,s.jsx)(k.$,{dataKey:"pnl",radius:[2,2,0,0],children:a.map((e,t)=>(0,s.jsx)(S.b,{fill:e.pnl>=0?"#22c55e":"#ef4444"},t))})]})})]})]})}function P(e){let{label:t,value:a,color:r}=e;return(0,s.jsxs)("div",{className:"bg-surface-hover rounded px-2 py-1.5",children:[(0,s.jsx)("p",{className:"text-[9px] text-gray-600 mb-0.5",children:t}),(0,s.jsx)("p",{className:"mono text-[12px] font-bold ".concat(r||"text-gray-300"),children:a})]})}function T(e){let{strategies:t}=e,a=t.find(e=>"highConfidence"===e.strategy)||{strategy:"highConfidence",trades:0,wins:0,losses:0,winRate:0,pnl:0,avgPnl:0};return(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("h2",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Strategy"}),(0,s.jsxs)("div",{className:"rounded-xl border border-white/[0.06] bg-white/[0.015] p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-[13px] font-semibold text-gray-200",children:"DCA Accumulator"}),(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-bold tracking-wide ".concat(a.pnl>0?"bg-emerald-500/10 text-emerald-400":a.pnl<0?"bg-red-500/10 text-red-400":"bg-white/[0.04] text-gray-500"),children:[a.pnl>=0?"+":"","$",a.pnl.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(F,{label:"Trades",value:a.trades.toString()}),(0,s.jsx)(F,{label:"Win Rate",value:a.trades>0?"".concat(a.winRate.toFixed(0),"%"):"ï¿½",color:a.winRate>=50?"text-emerald-400":a.trades>0?"text-red-400":void 0}),(0,s.jsx)(F,{label:"Wins",value:a.wins.toString(),color:"text-emerald-400"}),(0,s.jsx)(F,{label:"Losses",value:a.losses.toString(),color:a.losses>0?"text-red-400":void 0})]}),a.trades>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-600 mb-1",children:[(0,s.jsx)("span",{children:"Win Rate"}),(0,s.jsxs)("span",{className:"mono",children:[a.winRate.toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"w-full h-1.5 rounded-full bg-white/[0.04] overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-500/60 to-emerald-400/80 transition-all duration-700",style:{width:"".concat(Math.min(100,a.winRate),"%")}})})]})]})]})}function F(e){let{label:t,value:a,color:r}=e;return(0,s.jsxs)("div",{className:"bg-black/20 rounded-lg p-2.5",children:[(0,s.jsx)("p",{className:"text-[9px] text-gray-600 mb-0.5",children:t}),(0,s.jsx)("p",{className:"mono text-[15px] font-bold ".concat(r||"text-gray-300"),children:a})]})}let M={highConfidence:"High Conf",arbitrage:"Arbitrage"};function E(e){let{trades:t}=e,[a,l]=(0,r.useState)("all"),[n,i]=(0,r.useState)("all"),[d,c]=(0,r.useState)("all"),[o,x]=(0,r.useState)(0),p=(0,r.useMemo)(()=>{let e=t;return"all"!==a&&(e=e.filter(e=>e.asset===a)),"all"!==n&&(e=e.filter(e=>e.subStrategy===n)),"win"===d?e=e.filter(e=>null!==e.pnl&&e.pnl>0):"loss"===d&&(e=e.filter(e=>null!==e.pnl&&e.pnl<0)),e},[t,a,n,d]),m=Math.max(1,Math.ceil(p.length/20)),h=p.slice(20*o,(o+1)*20),b=p.reduce((e,t)=>{var a;return e+(null!==(a=t.pnl)&&void 0!==a?a:0)},0);return(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[(0,s.jsx)("h2",{className:"text-[11px] font-semibold text-gray-500 uppercase tracking-widest",children:"Trade History"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)(L,{value:a,onChange:e=>{l(e),x(0)},options:[{value:"all",label:"All Assets"},{value:"BTC",label:"BTC"},{value:"ETH",label:"ETH"},{value:"SOL",label:"SOL"},{value:"XRP",label:"XRP"}]}),(0,s.jsx)(L,{value:n,onChange:e=>{i(e),x(0)},options:[{value:"all",label:"All Strategies"},{value:"highConfidence",label:"High Conf"},{value:"arbitrage",label:"Arbitrage"}]}),(0,s.jsx)(L,{value:d,onChange:e=>{c(e),x(0)},options:[{value:"all",label:"All"},{value:"win",label:"Wins"},{value:"loss",label:"Losses"}]}),(0,s.jsxs)("span",{className:"text-[11px] text-gray-600 mono",children:[p.length," trades"]})]})]}),0===p.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-600 text-[13px]",children:"No trades match filters"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-auto max-h-[400px]",children:(0,s.jsxs)("table",{className:"w-full text-[12px]",children:[(0,s.jsxs)("thead",{className:"sticky top-0 bg-surface-card z-10",children:[(0,s.jsxs)("tr",{className:"text-[10px] text-gray-600 uppercase tracking-wider",children:[(0,s.jsx)("th",{className:"text-left py-2 pr-2 font-semibold",children:"Time"}),(0,s.jsx)("th",{className:"text-left py-2 pr-2 font-semibold",children:"Asset"}),(0,s.jsx)("th",{className:"text-left py-2 pr-2 font-semibold",children:"Strategy"}),(0,s.jsx)("th",{className:"text-left py-2 pr-2 font-semibold",children:"Action"}),(0,s.jsx)("th",{className:"text-left py-2 pr-2 font-semibold",children:"Side"}),(0,s.jsx)("th",{className:"text-right py-2 pr-2 font-semibold",children:"Price"}),(0,s.jsx)("th",{className:"text-right py-2 pr-2 font-semibold",children:"Amount"}),(0,s.jsx)("th",{className:"text-right py-2 pr-2 font-semibold",children:"Fee"}),(0,s.jsx)("th",{className:"text-right py-2 font-semibold",children:"P&L"})]}),(0,s.jsx)("tr",{children:(0,s.jsx)("th",{colSpan:9,className:"border-b border-surface-border p-0"})})]}),(0,s.jsx)("tbody",{children:h.map((e,t)=>{var a;let r=new Date(e.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,s.jsxs)("tr",{className:"border-b border-surface-border/40 hover:bg-surface-hover/50 transition-colors ".concat(null!==e.pnl&&0!==e.pnl?e.pnl>0?"bg-accent-green/[0.02]":"bg-accent-red/[0.02]":""),children:[(0,s.jsx)("td",{className:"py-2 pr-2 mono text-gray-400",children:r}),(0,s.jsx)("td",{className:"py-2 pr-2 text-gray-300 font-semibold",children:e.asset||"-"}),(0,s.jsx)("td",{className:"py-2 pr-2 text-gray-400 text-[10px]",children:e.subStrategy?M[e.subStrategy]||e.subStrategy:"-"}),(0,s.jsx)("td",{className:"py-2 pr-2",children:(0,s.jsx)("span",{className:"inline-block px-1.5 py-0.5 rounded text-[10px] font-semibold uppercase tracking-wide ".concat("buy"===e.action?"bg-accent-green/10 text-accent-green":"sell"===e.action?"bg-accent-red/10 text-accent-red":null!==e.pnl&&e.pnl>=0?"bg-emerald-500/10 text-emerald-400":"bg-red-500/10 text-red-400"),children:"resolution"===e.action?null!==e.pnl&&e.pnl>=0?"WON":"LOST":e.action})}),(0,s.jsx)("td",{className:"py-2 pr-2",children:"resolution"===e.action?(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("span",{className:"text-[10px] text-gray-500",children:["bet ","yes"===e.side?"UP":"DN"]}),(0,s.jsxs)("span",{className:"font-semibold text-[11px] ".concat(e.price>=.5?"text-accent-green":"text-accent-red"),children:[e.price>=.5?"UP":"DN"," won"]})]}):(0,s.jsx)("span",{className:"font-semibold uppercase ".concat("yes"===e.side?"text-accent-green":"text-accent-red"),children:"yes"===e.side?"UP":"DN"})}),(0,s.jsxs)("td",{className:"py-2 pr-2 text-right mono text-gray-300",children:["$",e.price.toFixed(4)]}),(0,s.jsxs)("td",{className:"py-2 pr-2 text-right mono text-gray-400",children:["$",e.amount.toFixed(4)]}),(0,s.jsx)("td",{className:"py-2 pr-2 text-right mono text-gray-600",children:null!==e.takerFee?"$".concat(e.takerFee.toFixed(4)):"-"}),(0,s.jsx)("td",{className:"py-2 text-right mono",children:null!==e.pnl?(0,s.jsxs)("span",{className:e.pnl>=0?"text-accent-green":"text-accent-red",children:[e.pnl>=0?"+":"","$",e.pnl.toFixed(4)]}):(0,s.jsx)("span",{className:"text-gray-700",children:"-"})})]},null!==(a=e.id)&&void 0!==a?a:"".concat(o,"-").concat(t))})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-surface-border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>x(e=>Math.max(0,e-1)),disabled:0===o,className:"px-2 py-1 rounded text-[11px] bg-surface-hover text-gray-400 disabled:opacity-30",children:"? Prev"}),(0,s.jsxs)("span",{className:"text-[11px] text-gray-500 mono",children:[o+1," / ",m]}),(0,s.jsx)("button",{onClick:()=>x(e=>Math.min(m-1,e+1)),disabled:o>=m-1,className:"px-2 py-1 rounded text-[11px] bg-surface-hover text-gray-400 disabled:opacity-30",children:"Next ?"})]}),(0,s.jsxs)("div",{className:"text-[11px]",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Running P&L: "}),(0,s.jsxs)("span",{className:"mono font-bold ".concat(b>=0?"text-accent-green":"text-accent-red"),children:[b>=0?"+":"","$",b.toFixed(4)]})]})]})]})]})}function L(e){let{value:t,onChange:a,options:r}=e;return(0,s.jsx)("select",{value:t,onChange:e=>a(e.target.value),className:"text-[10px] px-2 py-1 rounded bg-surface-input border border-surface-border text-gray-400",children:r.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})}let D={info:{icon:"?",color:"text-accent-blue"},success:{icon:"?",color:"text-accent-green"},warning:{icon:"?",color:"text-accent-yellow"},error:{icon:"?",color:"text-accent-red"}};function A(e){let{alerts:t,logs:a=[]}=e,l=(0,r.useRef)(null),[n,i]=(0,r.useState)("alerts");return(0,r.useEffect)(()=>{l.current&&(l.current.scrollTop=0)},[t.length,a.length]),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>i("alerts"),className:"text-[11px] font-semibold uppercase tracking-widest px-1 pb-0.5 border-b-2 transition-colors ".concat("alerts"===n?"text-gray-300 border-accent-blue":"text-gray-600 border-transparent hover:text-gray-400"),children:["Alerts (",t.length,")"]}),(0,s.jsxs)("button",{onClick:()=>i("log"),className:"text-[11px] font-semibold uppercase tracking-widest px-1 pb-0.5 border-b-2 transition-colors ".concat("log"===n?"text-gray-300 border-accent-blue":"text-gray-600 border-transparent hover:text-gray-400"),children:["Bot Log (",a.length,")"]})]})}),(0,s.jsx)("div",{ref:l,className:"space-y-1.5 max-h-[400px] overflow-auto",children:"alerts"===n?0===t.length?(0,s.jsx)("p",{className:"text-[12px] text-gray-600 text-center py-6",children:"No alerts yet"}):t.map(e=>{let t=D[e.severity]||D.info,a=new Date(e.timestamp).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,s.jsxs)("div",{className:"flex gap-2 py-1.5 border-b border-surface-border/40",children:[(0,s.jsx)("span",{className:"text-[11px] flex-shrink-0 ".concat(t.color),children:t.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"text-[11px] text-gray-300 leading-relaxed break-words",children:[e.asset&&(0,s.jsxs)("span",{className:"font-semibold text-gray-200 mr-1",children:["[",e.asset,"]"]}),e.message]}),(0,s.jsx)("p",{className:"text-[9px] text-gray-600 mono mt-0.5",children:a})]})]},e.id)}):0===a.length?(0,s.jsx)("p",{className:"text-[12px] text-gray-600 text-center py-6",children:"No log entries yet. Start the bot to see strategy decisions."}):a.map((e,t)=>(0,s.jsx)("div",{className:"py-1 border-b border-surface-border/20",children:(0,s.jsx)("p",{className:"text-[11px] text-gray-400 mono leading-relaxed break-words",children:e})},t))})]})}function R(e){var t,a,n,i,d,c,o,x,p,m,h,b;let{settings:u,botStatus:g,onSave:j,circuitBreaker:f,onResetCircuitBreaker:y,onResetStats:v}=e,[N,w]=(0,r.useState)(u),[k,S]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),[T,F]=(0,r.useState)(!1),[M,E]=(0,r.useState)(""),[L,D]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),[z,W]=(0,r.useState)(!1),[V,U]=(0,r.useState)(!1),[I,H]=(0,r.useState)({mode:!0,capital:!1,markets:!1,scalp:!0});(0,r.useEffect)(()=>{w(u)},[u]);let G="running"===g,_=(e,t)=>{w(a=>({...a,[e]:parseFloat(t)||0}))},K=(e,t)=>{w(a=>({...a,[e]:t}))},Y=e=>{w(t=>{let a=t.enabledAssets||[],s=a.includes(e)?a.filter(t=>t!==e):[...a,e];return{...t,enabledAssets:s.length>0?s:[e]}})},J=e=>{H(t=>({...t,[e]:!t[e]}))},X=async()=>{S(!0),P(!1);try{(await j(N)).success&&(P(!0),setTimeout(()=>P(!1),2e3))}catch(e){}S(!1)},q=JSON.stringify(N)!==JSON.stringify(u);return(0,s.jsxs)("div",{className:"space-y-3",children:[G&&(0,s.jsx)("div",{className:"px-4 py-2.5 rounded-xl bg-amber-500/[0.06] border border-amber-500/10",children:(0,s.jsx)("p",{className:"text-[11px] text-amber-400/90 font-medium",children:"Stop the bot to edit settings"})}),(0,s.jsx)($,{title:"Trading Mode",open:I.mode,onToggle:()=>J("mode"),badge:N.paperTrading?{text:"PAPER",color:"text-amber-400 bg-amber-400/10"}:{text:"LIVE",color:"text-red-400 bg-red-400/10"},children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl border ".concat(N.paperTrading?"bg-white/[0.02] border-white/[0.04]":"bg-red-500/[0.04] border-red-500/15"),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[13px] font-medium text-gray-200",children:N.paperTrading?"Paper Trading":"Live Trading"}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:N.paperTrading?"Simulated, no real money":"Real USDC on Polymarket"})]}),N.paperTrading?(0,s.jsx)("button",{onClick:()=>{G||F(!0)},disabled:G,className:"px-3 py-1.5 rounded-lg text-[11px] font-semibold bg-red-500/10 text-red-400 border border-red-500/15 hover:bg-red-500/15 transition-all disabled:opacity-30",children:"Go Live"}):(0,s.jsx)("button",{onClick:()=>{G||K("paperTrading",!0)},disabled:G,className:"px-3 py-1.5 rounded-lg text-[11px] font-semibold bg-white/[0.04] text-gray-400 border border-white/[0.06] hover:bg-white/[0.06] transition-all disabled:opacity-30",children:"Switch to Paper"})]})}),(0,s.jsx)($,{title:"Capital",open:I.capital,onToggle:()=>J("capital"),subtitle:"$".concat(N.maxTotalExposure," max"),children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(B,{label:"Max Exposure",value:N.maxTotalExposure,field:"maxTotalExposure",onChange:_,disabled:G,prefix:"$",step:"5"}),(0,s.jsx)(B,{label:"Daily Loss Limit",value:N.dailyLossLimit,field:"dailyLossLimit",onChange:_,disabled:G,prefix:"$",step:"1"}),(0,s.jsx)(B,{label:"Loss Limit",value:N.lossLimit,field:"lossLimit",onChange:_,disabled:G,suffix:"trades",step:"1"})]})}),(0,s.jsx)($,{title:"Markets",open:I.markets,onToggle:()=>J("markets"),children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:l.map(e=>{let t=(N.enabledAssets||[]).includes(e);return(0,s.jsx)("button",{onClick:()=>!G&&Y(e),disabled:G,className:"px-3.5 py-1.5 rounded-lg text-[11px] font-semibold border transition-all ".concat(t?"bg-blue-500/10 text-blue-400 border-blue-500/20":"bg-white/[0.02] text-gray-500 border-white/[0.06] hover:border-white/[0.1]"," ").concat(G?"opacity-30 cursor-not-allowed":"cursor-pointer"),children:e},e)})})}),(0,s.jsxs)($,{title:"Scalp Strategy",open:I.scalp,onToggle:()=>J("scalp"),badge:!1!==N.scalpEnabled?{text:"ACTIVE",color:"text-emerald-400 bg-emerald-400/10"}:{text:"OFF",color:"text-gray-500 bg-white/[0.04]"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 p-3 rounded-xl bg-white/[0.02] border border-white/[0.04]",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[12px] font-medium text-gray-300",children:"Bitbo Edge Scalper"}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"Uses Bitbo's 1-2s price lead to buy undervalued sides"})]}),(0,s.jsx)(O,{value:!1!==N.scalpEnabled,onChange:e=>K("scalpEnabled",e),disabled:G})]}),!1!==N.scalpEnabled&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsx)(B,{label:"Trade Size",value:null!==(t=N.scalpTradeSize)&&void 0!==t?t:12,field:"scalpTradeSize",onChange:_,disabled:G,prefix:"$",step:"1"}),(0,s.jsx)(B,{label:"Max Positions",value:null!==(a=N.scalpMaxPositions)&&void 0!==a?a:2,field:"scalpMaxPositions",onChange:_,disabled:G,step:"1"}),(0,s.jsx)(B,{label:"Min Gap",value:null!==(n=N.scalpMinGap)&&void 0!==n?n:.02,field:"scalpMinGap",onChange:_,disabled:G,prefix:"$",step:"0.01"}),(0,s.jsx)(B,{label:"Profit Target",value:null!==(i=N.scalpProfitTarget)&&void 0!==i?i:.03,field:"scalpProfitTarget",onChange:_,disabled:G,prefix:"$",step:"0.01"}),(0,s.jsx)(B,{label:"Entry Min",value:null!==(d=N.scalpEntryMin)&&void 0!==d?d:.15,field:"scalpEntryMin",onChange:_,disabled:G,prefix:"$",step:"0.01"}),(0,s.jsx)(B,{label:"Entry Max",value:null!==(c=N.scalpEntryMax)&&void 0!==c?c:.85,field:"scalpEntryMax",onChange:_,disabled:G,prefix:"$",step:"0.01"}),(0,s.jsx)(B,{label:"Exit Window",value:null!==(o=N.scalpExitWindow)&&void 0!==o?o:120,field:"scalpExitWindow",onChange:_,disabled:G,suffix:"sec",step:"10"}),(0,s.jsx)(B,{label:"Half Size After",value:null!==(x=N.scalpHalfSizeAfter)&&void 0!==x?x:420,field:"scalpHalfSizeAfter",onChange:_,disabled:G,suffix:"sec left",step:"30"})]}),(0,s.jsxs)("div",{className:"rounded-xl bg-white/[0.015] border border-white/[0.04] p-3",children:[(0,s.jsx)("p",{className:"text-[10px] text-gray-500 font-semibold mb-1",children:"How it works"}),(0,s.jsxs)("p",{className:"text-[10px] text-gray-600 leading-relaxed",children:["Predicts fair values using Bitbo BTC velocity + 30min trend. Market buys when a side is ",((null!==(p=N.scalpMinGap)&&void 0!==p?p:.02)*100).toFixed(0),"+ cents undervalued. Sells at entry + $",(null!==(m=N.scalpProfitTarget)&&void 0!==m?m:.03).toFixed(2)," or at exit window (",null!==(h=N.scalpExitWindow)&&void 0!==h?h:120,"s left). Halves trade size with ",Math.floor((null!==(b=N.scalpHalfSizeAfter)&&void 0!==b?b:420)/60),"min left."]})]})]})]}),(0,s.jsx)("button",{onClick:X,disabled:!q||k||G,className:"w-full py-2.5 rounded-xl text-[13px] font-semibold transition-all duration-300 ".concat(C?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":q&&!G?"bg-blue-500/10 text-blue-400 border border-blue-500/20 hover:bg-blue-500/15":"bg-white/[0.03] text-gray-600 border border-white/[0.06] cursor-not-allowed"),children:k?"Saving...":C?"Saved":q?"Save Changes":"No Changes"}),f.triggered&&(0,s.jsxs)("div",{className:"rounded-xl border border-red-500/15 bg-red-500/[0.04] p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),(0,s.jsx)("span",{className:"text-[12px] font-semibold text-red-400",children:"Circuit Breaker Active"})]}),f.reason&&(0,s.jsx)("p",{className:"text-[11px] text-gray-400",children:f.reason}),L?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>D(!1),className:"flex-1 py-2 rounded-xl text-[12px] bg-white/[0.04] text-gray-400 border border-white/[0.06]",children:"Cancel"}),(0,s.jsx)("button",{onClick:async()=>{R(!0);try{await y()}catch(e){}R(!1),D(!1)},disabled:A,className:"flex-1 py-2 rounded-xl text-[12px] font-semibold bg-red-500/15 text-red-400 border border-red-500/20 disabled:opacity-40",children:A?"Resetting...":"Confirm"})]}):(0,s.jsx)("button",{onClick:()=>D(!0),className:"w-full py-2 rounded-xl text-[12px] font-semibold bg-red-500/10 text-red-400 border border-red-500/15 hover:bg-red-500/15 transition-colors",children:"Disable Circuit Breaker"})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-white/[0.06] bg-white/[0.015] p-4 space-y-3",children:[(0,s.jsx)("span",{className:"text-[12px] font-semibold text-gray-400",children:"Reset Stats"}),(0,s.jsx)("p",{className:"text-[10px] text-gray-600",children:"Delete all trade history and analytics."}),z?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>W(!1),className:"flex-1 py-2 rounded-xl text-[12px] bg-white/[0.04] text-gray-400 border border-white/[0.06]",children:"Cancel"}),(0,s.jsx)("button",{onClick:async()=>{U(!0);try{await v()}catch(e){}U(!1),W(!1)},disabled:V,className:"flex-1 py-2 rounded-xl text-[12px] font-semibold bg-red-500/15 text-red-400 border border-red-500/20 disabled:opacity-40",children:V?"Deleting...":"Confirm Delete"})]}):(0,s.jsx)("button",{onClick:()=>W(!0),className:"w-full py-2 rounded-xl text-[12px] font-semibold bg-white/[0.04] text-gray-400 border border-white/[0.06] hover:bg-white/[0.06] transition-colors",children:"Reset All Stats"})]}),T&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md",children:(0,s.jsxs)("div",{className:"bg-[#13151a] border border-red-500/20 rounded-2xl p-6 max-w-sm mx-4",children:[(0,s.jsx)("h3",{className:"text-[14px] font-semibold text-red-400 mb-3",children:"Switch to Live Trading"}),(0,s.jsxs)("p",{className:"text-[13px] text-gray-400 mb-4",children:["Real USDC trades. Type ",(0,s.jsx)("strong",{className:"text-gray-200",children:"CONFIRM"})," to proceed."]}),(0,s.jsx)("input",{type:"text",value:M,onChange:e=>E(e.target.value),placeholder:"Type CONFIRM",className:"w-full mb-3 px-3 py-2 rounded-xl text-[13px] mono bg-black/40 border border-white/[0.08] text-gray-200 focus:border-red-500/30 focus:outline-none"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>F(!1),className:"flex-1 py-2 rounded-xl text-[13px] bg-white/[0.04] text-gray-400 border border-white/[0.06]",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{"CONFIRM"===M&&(F(!1),K("paperTrading",!1))},disabled:"CONFIRM"!==M,className:"flex-1 py-2 rounded-xl text-[13px] bg-red-500/10 text-red-400 border border-red-500/20 font-medium disabled:opacity-30",children:"Enable Live"})]})]})})]})}function $(e){let{title:t,open:a,onToggle:r,children:l,badge:n,subtitle:i}=e;return(0,s.jsxs)("div",{className:"rounded-xl border border-white/[0.06] bg-white/[0.015] overflow-hidden",children:[(0,s.jsxs)("button",{type:"button",onClick:r,className:"w-full flex items-center justify-between px-4 py-3 hover:bg-white/[0.02] transition-colors text-left",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,s.jsx)("span",{className:"text-[9px] text-gray-600 transition-transform duration-200 ".concat(a?"rotate-90":""),children:"â¶"}),(0,s.jsx)("span",{className:"text-[12px] font-semibold text-gray-200 tracking-wide",children:t}),n&&(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded-md text-[9px] font-bold tracking-wider ".concat(n.color),children:n.text})]}),i&&!a&&(0,s.jsx)("span",{className:"text-[10px] text-gray-600 mono",children:i})]}),(0,s.jsx)("div",{className:"overflow-hidden transition-all duration-300 ".concat(a?"max-h-[800px] opacity-100":"max-h-0 opacity-0"),children:(0,s.jsx)("div",{className:"px-4 pb-4 pt-1",children:l})})]})}function B(e){let{label:t,value:a,field:r,onChange:l,disabled:n,prefix:i,suffix:d,step:c}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[10px] text-gray-500 font-medium mb-1.5 tracking-wide",children:t}),(0,s.jsxs)("div",{className:"relative",children:[i&&(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[10px] text-gray-600",children:i}),(0,s.jsx)("input",{type:"number",step:c,value:a,onChange:e=>l(r,e.target.value),disabled:n,className:"w-full mono text-[12px] py-2 rounded-xl bg-black/30 border border-white/[0.06] text-gray-200 focus:border-blue-500/30 focus:outline-none transition-all disabled:opacity-30 ".concat(i?"pl-7 pr-3":d?"pl-3 pr-10":"px-3")}),d&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] text-gray-600",children:d})]})]})}function O(e){let{value:t,onChange:a,disabled:r}=e;return(0,s.jsx)("button",{type:"button",onClick:()=>!r&&a(!t),className:"relative w-9 h-5 rounded-full transition-all duration-300 ".concat(t?"bg-emerald-500/80":"bg-white/[0.08]"," ").concat(r?"opacity-30 cursor-not-allowed":"cursor-pointer"),children:(0,s.jsx)("span",{className:"absolute top-[3px] left-[3px] w-3.5 h-3.5 rounded-full bg-white shadow-sm transition-transform duration-300 ".concat(t?"translate-x-[16px]":"translate-x-0")})})}function z(){let[e,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{t(!0),i(null);try{let e=await fetch("/api/setup/test"),t=await e.json();t.success?l(t.data):i(t.error||"Test failed")}catch(e){i(e instanceof Error?e.message:"Network error")}t(!1)},[]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"rounded-xl bg-blue-500/[0.04] border border-blue-500/10 p-4",children:[(0,s.jsx)("h3",{className:"text-[13px] font-semibold text-blue-400 mb-3",children:"How to go live"}),(0,s.jsx)("p",{className:"text-[11px] text-gray-400 leading-relaxed mb-4",children:"Everything happens on your VPS. Nothing to enter in the bot UI."}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(W,{n:1,title:"Get a VPS in Amsterdam",children:"Hetzner, Vultr, or DigitalOcean. Pick Amsterdam. ~$5/mo is fine."}),(0,s.jsx)(W,{n:2,title:"Clone & install on the VPS",children:(0,s.jsx)("code",{className:"block mt-1.5 px-3 py-2 rounded-lg bg-black/40 border border-white/[0.04] text-[10px] mono text-gray-400",children:"git clone your-repo && cd your-repo && npm install"})}),(0,s.jsxs)(W,{n:3,title:"Create .env.local on the VPS",children:[(0,s.jsxs)("p",{className:"text-gray-500 mb-2",children:["Create a file called ",(0,s.jsx)("code",{className:"px-1 py-0.5 rounded bg-white/[0.06] text-gray-400",children:".env.local"})," in the project folder with two lines:"]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(V,{name:"PRIVATE_KEY",value:"0x_from_metamask"}),(0,s.jsx)(V,{name:"FUNDER_ADDRESS",value:"0x_from_polymarket_profile"})]}),(0,s.jsxs)("p",{className:"text-[9px] text-gray-600 mt-2",children:["Private key: MetaMask â Account â Export Private Key",(0,s.jsx)("br",{}),"Funder address: polymarket.com â Profile â your wallet address"]})]}),(0,s.jsx)(W,{n:4,title:"Start the bot",children:(0,s.jsx)("code",{className:"block mt-1.5 px-3 py-2 rounded-lg bg-black/40 border border-white/[0.04] text-[10px] mono text-gray-400",children:"npm run build && npm start"})}),(0,s.jsx)(W,{n:5,title:"Test & switch to Live",children:"Hit the button below, check everything is green, then go to Settings â Trading Mode â Live."})]})]}),(0,s.jsx)("button",{onClick:d,disabled:e,className:"w-full py-3 rounded-xl text-[13px] font-semibold transition-all duration-300 ".concat(e?"bg-white/[0.04] text-gray-500 border border-white/[0.06] cursor-wait":"bg-blue-500/[0.08] text-blue-400 border border-blue-500/15 hover:bg-blue-500/[0.12]"),children:e?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"inline-block w-3.5 h-3.5 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Testing..."]}):a?"Re-test":"Test Connections"}),n&&(0,s.jsx)("div",{className:"px-4 py-2.5 rounded-xl bg-red-500/[0.06] border border-red-500/10",children:(0,s.jsx)("p",{className:"text-[11px] text-red-400",children:n})}),a&&(0,s.jsxs)("div",{className:"space-y-2",children:[["envVars","rpc","wallet","clobRead","clobAuth"].map((e,t)=>{let r=a.steps[e];return r?(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-xl border ".concat(r.ok?"bg-emerald-500/[0.02] border-emerald-500/10":"bg-white/[0.015] border-white/[0.04]"),children:[r.ok?(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-emerald-500/15 flex items-center justify-center shrink-0 mt-0.5",children:(0,s.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 12 12",fill:"none",children:(0,s.jsx)("path",{d:"M2 6l3 3 5-5",stroke:"#10b981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-white/[0.06] flex items-center justify-center shrink-0 mt-0.5",children:(0,s.jsx)("span",{className:"text-[9px] text-gray-600 font-bold",children:t+1})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"text-[12px] font-medium text-gray-200",children:r.label}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5 break-all",children:r.detail})]})]},e):null}),(0,s.jsx)("div",{className:"p-4 rounded-xl border text-center ".concat(a.readyForLive?"bg-emerald-500/[0.04] border-emerald-500/15":"bg-white/[0.015] border-white/[0.06]"),children:a.readyForLive?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-[13px] font-semibold text-emerald-400",children:"Ready for Live Trading"}),(0,s.jsx)("p",{className:"text-[11px] text-gray-500 mt-1",children:"Go to Settings â Trading Mode â type CONFIRM"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-[13px] font-medium text-gray-400",children:"Not Ready"}),(0,s.jsx)("p",{className:"text-[11px] text-gray-600 mt-1",children:"Fix the failing steps, then re-test"})]})})]})]})}function W(e){let{n:t,title:a,children:r}=e;return(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-blue-500/10 flex items-center justify-center shrink-0 mt-0.5",children:(0,s.jsx)("span",{className:"text-[9px] font-bold text-blue-400",children:t})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-[12px] font-medium text-gray-200 mb-1",children:a}),(0,s.jsx)("div",{className:"text-[10px] text-gray-500 leading-relaxed",children:r})]})]})}function V(e){let{name:t,value:a}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-1 py-1.5 px-3 rounded-lg bg-black/30 border border-white/[0.04] mono text-[10px]",children:[(0,s.jsx)("span",{className:"text-blue-400",children:t}),(0,s.jsx)("span",{className:"text-gray-600",children:"="}),(0,s.jsx)("span",{className:"text-gray-400",children:a})]})}function U(e){var t,a,l,n;let{activeMarkets:i,scalp:d,settings:c,capital:o}=e,[x,p]=(0,r.useState)("up"),[m,h]=(0,r.useState)("5"),[b,u]=(0,r.useState)(!1),[g,j]=(0,r.useState)(null),f=i.BTC,y="up"===x?null!==(t=null==f?void 0:f.yesPrice)&&void 0!==t?t:0:null!==(a=null==f?void 0:f.noPrice)&&void 0!==a?a:0,v=y>0?parseFloat(m)/y:0,N=v-parseFloat(m),w=async()=>{f&&!(y<=0)&&(u(!0),j(null),await new Promise(e=>setTimeout(e,800)),j({ok:!1,msg:"Manual trading coming soon. This panel is ready for your order API."}),u(!1))};return(0,s.jsxs)("div",{className:"max-w-xl mx-auto space-y-3",children:[(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:"text-blue-400",children:(0,s.jsx)("path",{d:"M8 1v14M1 8h14",strokeLinecap:"round"})}),(0,s.jsx)("h2",{className:"text-[13px] font-semibold text-gray-200",children:"Manual Trade"}),(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-blue-500/10 text-blue-400 tracking-wider",children:"BETA"})]}),(0,s.jsxs)("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Place manual bets on the current BTC 15-minute window. Choose UP or DOWN, set your amount, and confirm.",c.paperTrading&&" Paper mode - no real orders will be placed."]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-3 text-center",children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 uppercase",children:"BTC Price"}),(0,s.jsxs)("p",{className:"mono text-[14px] font-bold text-gray-200",children:["$",d.binancePrice>0?d.binancePrice.toLocaleString(void 0,{minimumFractionDigits:2}):"---"]})]}),(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-3 text-center",children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 uppercase",children:"Available"}),(0,s.jsxs)("p",{className:"mono text-[14px] font-bold text-emerald-400",children:["$",o.available.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-3 text-center",children:[(0,s.jsx)("span",{className:"text-[8px] text-gray-600 uppercase",children:"Change"}),(0,s.jsxs)("p",{className:"mono text-[14px] font-bold ".concat(d.btcChangePercent>=0?"text-emerald-400":"text-red-400"),children:[(100*d.btcChangePercent).toFixed(3),"%"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("button",{onClick:()=>p("up"),className:"p-4 rounded-xl border-2 transition-all duration-200 text-center ".concat("up"===x?"border-emerald-500/40 bg-emerald-500/[0.06]":"border-white/[0.06] bg-[#111318] hover:border-white/[0.1]"),children:[(0,s.jsx)("div",{className:"text-[20px] mb-1",children:"â²"}),(0,s.jsx)("div",{className:"text-[13px] font-bold ".concat("up"===x?"text-emerald-400":"text-gray-400"),children:"UP (Yes)"}),(0,s.jsxs)("div",{className:"mono text-[16px] font-bold text-emerald-400 mt-1",children:["$",null!==(l=null==f?void 0:f.yesPrice.toFixed(2))&&void 0!==l?l:"---"]}),(0,s.jsxs)("div",{className:"text-[9px] text-gray-600 mt-0.5",children:["Fair $",d.fairValue.up.toFixed(2)]})]}),(0,s.jsxs)("button",{onClick:()=>p("down"),className:"p-4 rounded-xl border-2 transition-all duration-200 text-center ".concat("down"===x?"border-red-500/40 bg-red-500/[0.06]":"border-white/[0.06] bg-[#111318] hover:border-white/[0.1]"),children:[(0,s.jsx)("div",{className:"text-[20px] mb-1",children:"â¼"}),(0,s.jsx)("div",{className:"text-[13px] font-bold ".concat("down"===x?"text-red-400":"text-gray-400"),children:"DOWN (No)"}),(0,s.jsxs)("div",{className:"mono text-[16px] font-bold text-red-400 mt-1",children:["$",null!==(n=null==f?void 0:f.noPrice.toFixed(2))&&void 0!==n?n:"---"]}),(0,s.jsxs)("div",{className:"text-[9px] text-gray-600 mt-0.5",children:["Fair $",d.fairValue.down.toFixed(2)]})]})]}),(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-4",children:[(0,s.jsx)("label",{className:"text-[10px] text-gray-500 uppercase tracking-wider font-semibold mb-2 block",children:"Amount (USDC)"}),(0,s.jsxs)("div",{className:"relative mb-3",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[12px] text-gray-500 mono",children:"$"}),(0,s.jsx)("input",{type:"number",value:m,onChange:e=>h(e.target.value),step:"0.5",min:"0.1",className:"w-full pl-7 pr-3 py-2.5 rounded-xl mono text-[16px] font-bold bg-black/30 border border-white/[0.06] text-gray-100 focus:border-blue-500/30 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"flex gap-1.5 flex-wrap",children:[[1,2,5,10,25].map(e=>(0,s.jsxs)("button",{onClick:()=>h(e.toString()),className:"px-3 py-1 rounded-lg text-[11px] font-semibold mono transition-all ".concat(m===e.toString()?"bg-blue-500/15 text-blue-400 border border-blue-500/20":"bg-white/[0.03] text-gray-500 border border-white/[0.06] hover:text-gray-300"),children:["$",e]},e)),(0,s.jsx)("button",{onClick:()=>h(o.available.toFixed(2)),className:"px-3 py-1 rounded-lg text-[11px] font-semibold transition-all bg-white/[0.03] text-gray-500 border border-white/[0.06] hover:text-gray-300",children:"MAX"})]})]}),y>0&&parseFloat(m)>0&&(0,s.jsxs)("div",{className:"bg-[#111318] rounded-xl border border-white/[0.04] p-4 space-y-2",children:[(0,s.jsx)("h3",{className:"text-[10px] text-gray-500 uppercase tracking-wider font-semibold",children:"Order Preview"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-y-1.5 text-[11px]",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Side"}),(0,s.jsx)("span",{className:"text-right font-bold ".concat("up"===x?"text-emerald-400":"text-red-400"),children:"up"===x?"UP (Yes)":"DOWN (No)"}),(0,s.jsx)("span",{className:"text-gray-500",children:"Price"}),(0,s.jsxs)("span",{className:"text-right mono text-gray-300",children:["$",y.toFixed(2)]}),(0,s.jsx)("span",{className:"text-gray-500",children:"Cost"}),(0,s.jsxs)("span",{className:"text-right mono text-gray-300",children:["$",parseFloat(m).toFixed(2)]}),(0,s.jsx)("span",{className:"text-gray-500",children:"Shares"}),(0,s.jsx)("span",{className:"text-right mono text-gray-300",children:v.toFixed(2)}),(0,s.jsx)("span",{className:"text-gray-500",children:"Payout if win"}),(0,s.jsxs)("span",{className:"text-right mono text-emerald-400",children:["$",v.toFixed(2)]}),(0,s.jsx)("span",{className:"text-gray-500",children:"Profit if win"}),(0,s.jsxs)("span",{className:"text-right mono text-emerald-400",children:["+$",N.toFixed(2)]})]})]}),(0,s.jsx)("button",{onClick:w,disabled:b||y<=0||0>=parseFloat(m),className:"w-full py-3 rounded-xl text-[13px] font-bold tracking-wide transition-all duration-200 ".concat("up"===x?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 hover:bg-emerald-500/15":"bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/15"," disabled:opacity-30 disabled:cursor-not-allowed"),children:b?(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("span",{className:"inline-block w-3 h-3 border-[1.5px] border-current border-t-transparent rounded-full animate-spin"}),"Placing..."]}):"BUY ".concat(x.toUpperCase()," - $").concat(parseFloat(m||"0").toFixed(2))}),g&&(0,s.jsx)("div",{className:"rounded-xl border p-3 text-[11px] ".concat(g.ok?"bg-emerald-500/[0.04] border-emerald-500/10 text-emerald-400":"bg-amber-500/[0.04] border-amber-500/10 text-amber-400"),children:g.msg}),(0,s.jsx)("div",{className:"text-[9px] text-gray-600 text-center px-4",children:c.paperTrading?"Paper mode - trades are simulated":"Live mode - real USDC will be used"})]})}let I={binancePrice:0,windowOpenPrice:0,btcChangePercent:0,fairValue:{up:.5,down:.5},positions:[],pendingBuys:[],cooldownUntil:0};function H(){var e;let{state:t,trades:a,pnlHistory:l,dailyPnl:c,strategyPerf:x,alerts:p,logs:m,sseConnected:b,startBot:u,stopBot:g,updateSettings:j,resetCircuitBreaker:f,resetStats:y,recentOutcomes:v,scalpData:N}=function(){let[e,t]=(0,r.useState)(n),[a,s]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[o,x]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[h,b]=(0,r.useState)([]),[u,g]=(0,r.useState)([]),[j,f]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),N=(0,r.useRef)(null),w=(0,r.useCallback)(async()=>{try{let[e,a]=await Promise.all([fetch("/api/bot/status"),fetch("/api/trades")]),r=await e.json(),l=await a.json();r.success&&(t(r.data),r.data.alerts&&m(r.data.alerts)),l.success&&(s(l.data.trades),i(l.data.pnlHistory));try{let e=await fetch("/api/stats"),t=await e.json();t.success&&(t.data.daily&&c(t.data.daily),t.data.strategies&&x(t.data.strategies))}catch(e){}try{let e=await fetch("/api/outcomes"),t=await e.json();t.success&&Array.isArray(t.data)&&g(t.data)}catch(e){}}catch(e){console.error("Failed to fetch initial data:",e)}},[]);(0,r.useEffect)(()=>{w();let e=()=>{let a=new EventSource("/api/stream");N.current=a,a.onopen=()=>v(!0),a.onmessage=e=>{try{let a=JSON.parse(e.data);switch(a.type){case"state":t(a.data);break;case"price":{let e=a.data;t(t=>({...t,activeMarkets:e.markets?{...t.activeMarkets,...e.markets}:t.activeMarkets})),e.scalp&&f(e.scalp),e.recentOutcomes&&g(t=>{if(t.length!==e.recentOutcomes.length)return e.recentOutcomes;for(let a=0;a<t.length;a++)if(t[a].slug!==e.recentOutcomes[a].slug||t[a].result!==e.recentOutcomes[a].result)return e.recentOutcomes;return t});break}case"trade":s(e=>[a.data,...e].slice(0,200)),fetch("/api/trades").then(e=>e.json()).then(e=>{e.success&&i(e.data.pnlHistory)}),fetch("/api/stats").then(e=>e.json()).then(e=>{e.success&&(e.data.daily&&c(e.data.daily),e.data.strategies&&x(e.data.strategies))}).catch(()=>{});break;case"alert":m(e=>[a.data,...e].slice(0,100));break;case"log":b(e=>["[".concat(new Date().toLocaleTimeString(),"] ").concat(a.data.message),...e].slice(0,100))}}catch(e){}},a.onerror=()=>{v(!1),a.close(),setTimeout(e,3e3)}};return e(),()=>{var e;null===(e=N.current)||void 0===e||e.close()}},[w]);let k=(0,r.useCallback)(async()=>{let e=await fetch("/api/bot/start",{method:"POST"}),t=await e.json();if(!t.success)throw Error(t.error);await w()},[w]),S=(0,r.useCallback)(async()=>{let e=await fetch("/api/bot/stop",{method:"POST"}),t=await e.json();if(!t.success)throw Error(t.error);await w()},[w]);return{state:e,trades:a,pnlHistory:l,dailyPnl:d,strategyPerf:o,alerts:p,logs:h,recentOutcomes:u,scalpData:j,sseConnected:y,startBot:k,stopBot:S,updateSettings:(0,r.useCallback)(async e=>{let a=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await a.json();return s.success&&t(e=>({...e,settings:s.data})),s},[]),resetCircuitBreaker:(0,r.useCallback)(async()=>{let e=await fetch("/api/bot/circuit-breaker/reset",{method:"POST"}),t=await e.json();if(!t.success)throw Error(t.error);await w()},[w]),resetStats:(0,r.useCallback)(async()=>{let e=await fetch("/api/stats",{method:"DELETE"}),t=await e.json();if(!t.success)throw Error(t.error);s([]),i([]),c([]),x([]),await w()},[w])}}(),[w,k]=(0,r.useState)(!1),[S,P]=(0,r.useState)("settings"),[F,M]=(0,r.useState)("dashboard"),L=(null===(e=t.alerts)||void 0===e?void 0:e.length)>0?t.alerts:p,D=N||t.scalp||I;return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#08090c]",children:[(0,s.jsx)(i,{botStatus:t.status,connection:t.connection,sseConnected:b,lastAction:t.lastAction,lastActionTime:t.lastActionTime,paperTrading:t.settings.paperTrading,cumulativePnl:t.cumulativePnl,totalTrades:t.totalTrades,clobReady:t.clobReady,walletBalance:t.walletBalance,walletAddress:t.walletAddress,onSettingsClick:()=>k(!0)}),!t.settings.paperTrading&&(0,s.jsxs)("div",{className:"px-5 py-1 bg-red-500/[0.04] border-b border-red-500/10 flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-red-400 animate-pulse"}),(0,s.jsx)("span",{className:"text-[9px] font-bold text-red-400 tracking-wide",children:"LIVE TRADING ACTIVE"})]}),(0,s.jsx)("div",{className:"px-4 pt-2 pb-0 max-w-[1600px] w-full mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center gap-0.5 bg-white/[0.02] rounded-lg p-0.5 w-fit border border-white/[0.04]",children:[["dashboard","history","logs"].map(e=>(0,s.jsx)("button",{onClick:()=>M(e),className:"px-3 py-1 rounded-md text-[11px] font-medium transition-all duration-200 ".concat(F===e?"bg-white/[0.08] text-gray-100 shadow-sm":"text-gray-500 hover:text-gray-300 hover:bg-white/[0.03]"),children:"dashboard"===e?"Dashboard":"history"===e?"History":"Logs"},e)),(0,s.jsx)("div",{className:"w-px h-4 bg-white/[0.06] mx-0.5"}),(0,s.jsxs)("button",{onClick:()=>M("trade"),className:"px-3 py-1 rounded-md text-[11px] font-medium transition-all duration-200 flex items-center gap-1.5 ".concat("trade"===F?"bg-blue-500/10 text-blue-400 shadow-sm":"text-gray-600 hover:text-gray-400 hover:bg-white/[0.03]"),children:[(0,s.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:(0,s.jsx)("path",{d:"M8 2v12M2 8h12"})}),"Trade"]})]})}),(0,s.jsxs)("div",{className:"flex-1 p-3 lg:p-4 pt-2 max-w-[1600px] w-full mx-auto space-y-2",children:["dashboard"===F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-2 slide-up",children:[(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsx)(d,{status:t.status,settings:t.settings,onStart:u,onStop:g,enabledAssets:t.settings.enabledAssets})}),(0,s.jsx)(o,{capital:t.capital,circuitBreaker:t.circuitBreaker})]}),(0,s.jsx)("div",{className:"slide-up",style:{animationDelay:"50ms"},children:(0,s.jsx)(h,{activeMarkets:t.activeMarkets,scalp:D,settings:t.settings,recentOutcomes:v})})]}),"history"===F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fade-in",children:(0,s.jsx)(C,{data:l,dailyData:c})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-2 fade-in",style:{animationDelay:"25ms"},children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(E,{trades:a})}),(0,s.jsx)(T,{strategies:x})]})]}),"logs"===F&&(0,s.jsx)("div",{className:"fade-in",children:(0,s.jsx)(A,{alerts:L,logs:m})}),"trade"===F&&(0,s.jsx)("div",{className:"fade-in",children:(0,s.jsx)(U,{activeMarkets:t.activeMarkets,scalp:D,settings:t.settings,capital:t.capital})})]}),w&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex justify-end",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>k(!1)}),(0,s.jsxs)("div",{className:"relative w-full max-w-md bg-[#0c0e12] border-l border-white/[0.06] overflow-y-auto shadow-2xl",style:{animation:"slideIn 0.25s ease-out"},children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 bg-[#0c0e12]/90 backdrop-blur-md border-b border-white/[0.04]",children:(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-3",children:[(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(G,{active:"settings"===S,onClick:()=>P("settings"),children:"Settings"}),(0,s.jsx)(G,{active:"setup"===S,onClick:()=>P("setup"),children:"Setup"})]}),(0,s.jsx)("button",{onClick:()=>k(!1),className:"w-7 h-7 rounded-lg flex items-center justify-center text-gray-500 hover:text-gray-300 hover:bg-white/[0.04] transition-colors text-[16px]",children:"â"})]})}),(0,s.jsx)("div",{className:"p-5",children:"settings"===S?(0,s.jsx)(R,{settings:t.settings,botStatus:t.status,onSave:j,circuitBreaker:t.circuitBreaker,onResetCircuitBreaker:f,onResetStats:y}):(0,s.jsx)(z,{})})]})]})]})}function G(e){let{active:t,onClick:a,children:r}=e;return(0,s.jsx)("button",{onClick:a,className:"px-3.5 py-1.5 rounded-lg text-[12px] font-medium transition-all ".concat(t?"bg-white/[0.06] text-gray-200":"text-gray-500 hover:text-gray-300 hover:bg-white/[0.03]"),children:r})}}},function(e){e.O(0,[78,203,971,117,744],function(){return e(e.s=1630)}),_N_E=e.O()}]);