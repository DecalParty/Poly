"use strict";(()=>{var e={};e.id=83,e.ids=[83],e.modules={12792:e=>{e.exports=require("@ethersproject/contracts")},90399:e=>{e.exports=require("@ethersproject/providers")},47152:e=>{e.exports=require("@ethersproject/wallet")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},74026:e=>{e.exports=require("string_decoder")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},67332:e=>{e.exports=import("@polymarket/clob-client")},99648:e=>{e.exports=import("axios")},37097:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>c,requestAsyncStorage:()=>u,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var o=r(49303),s=r(88716),l=r(60670),i=r(34722),n=e([i]);i=(n.then?(await n)():n)[0];let p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/setup/test/route",pathname:"/api/setup/test",filename:"route",bundlePath:"app/api/setup/test/route"},resolvedPagePath:"C:\\Users\\Vilez\\Desktop\\Poly\\polymarket-bot\\src\\app\\api\\setup\\test\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:m}=p,h="/api/setup/test/route";function c(){return(0,l.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}a()}catch(e){a(e)}})},49303:(e,t,r)=>{e.exports=r(30517)},34722:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{GET:()=>c,dynamic:()=>p});var o=r(87070),s=r(21925),l=r(90399),i=r(47152),n=e([s]);s=(n.then?(await n)():n)[0];let p="force-dynamic";async function c(){let e={},t=process.env.PRIVATE_KEY,a=process.env.FUNDER_ADDRESS,n=process.env.POLYGON_RPC_URL||"https://polygon-rpc.com",c=process.env.CLOB_API_URL||"https://clob.polymarket.com",p=!!t&&"0x_your_private_key_here"!==t&&t.length>10,u=!!a&&"0x_your_funder_address_here"!==a&&a.length>10;e.envVars={ok:p&&u,label:"Environment Variables",detail:p||u?p?u?"PRIVATE_KEY and FUNDER_ADDRESS configured":"FUNDER_ADDRESS missing from .env.local":"PRIVATE_KEY missing from .env.local":"PRIVATE_KEY and FUNDER_ADDRESS missing from .env.local"};let d="";try{let r=new l.StaticJsonRpcProvider(n,137),a=await Promise.race([r.getBlockNumber(),new Promise((e,t)=>setTimeout(()=>t(Error("timeout")),5e3))]);p&&(d=new i.Wallet(t,r).address),e.rpc={ok:!0,label:"Polygon RPC",detail:`Connected (block #${a}) � ${n.includes("polygon-rpc.com")?"? Public RPC (slow)":n.replace(/\/v2\/.*/,"/v2/***")}`}}catch(t){e.rpc={ok:!1,label:"Polygon RPC",detail:`Failed to connect to ${n.replace(/\/v2\/.*/,"/v2/***")}: ${t instanceof Error?t.message:t}`}}if(p&&u&&e.rpc.ok)try{let o=new l.StaticJsonRpcProvider(n,137),c=new i.Wallet(t,o),{Contract:p}=await Promise.resolve().then(r.t.bind(r,12792,23)),u=["function balanceOf(address) view returns (uint256)"],m=new p("0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",u,o),h=new p("0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",u,o),P=[c.address];a&&a.toLowerCase()!==c.address.toLowerCase()&&P.push(a);let b=await Promise.race([Promise.all(P.flatMap(e=>[m.balanceOf(e).then(t=>({addr:e,token:"USDC.e",val:Number(t)/1e6})).catch(()=>({addr:e,token:"USDC.e",val:0})),h.balanceOf(e).then(t=>({addr:e,token:"USDC",val:Number(t)/1e6})).catch(()=>({addr:e,token:"USDC",val:0}))])),new Promise((e,t)=>setTimeout(()=>t(Error("timeout")),8e3))]),v=b.reduce((e,t)=>e+t.val,0);console.log(`[Setup] On-chain balances: ${b.map(e=>`${e.token}@${e.addr.slice(0,6)}=$${e.val.toFixed(2)}`).join(", ")}`);let x=0;try{let e=await Promise.race([(0,s.tS)(),new Promise(e=>setTimeout(()=>e(null),5e3))]);if(e){let t=await e.getBalanceAllowance({asset_type:"COLLATERAL"}),r=t?.balance||"0",a=parseFloat(r);x=a>1e6?a/1e6:a,console.log(`[Setup] Exchange balance raw="${r}" parsed=${x}`)}}catch{}let E=v+x,k=[];x>0&&k.push(`$${x.toFixed(2)} exchange`),v>0&&k.push(`$${v.toFixed(2)} on-chain`);let A=a?`${a.slice(0,6)}...${a.slice(-4)}`:`${d.slice(0,6)}...${d.slice(-4)}`;e.wallet={ok:!0,label:"Wallet",detail:E>0?`${A} | ${k.join(" + ")}`:`${A} | $0.00 available (funds may be in active positions)`}}catch(t){e.wallet={ok:!1,label:"Wallet",detail:`Could not read balance: ${t instanceof Error?t.message:t}`}}else e.wallet={ok:!1,label:"Wallet",detail:p?"RPC not connected":"No PRIVATE_KEY set"};try{let t=(0,s.YX)();await Promise.race([t.getOrderBook("0x0000000000000000000000000000000000000000000000000000000000000001"),new Promise((e,t)=>setTimeout(()=>t(Error("timeout")),5e3))]),e.clobRead={ok:!0,label:"CLOB API (read)",detail:`Connected to ${c}`}}catch(r){let t=r instanceof Error?r.message:String(r);t.includes("404")||t.includes("Not Found")||t.includes("400")?e.clobRead={ok:!0,label:"CLOB API (read)",detail:`Connected to ${c}`}:e.clobRead={ok:!1,label:"CLOB API (read)",detail:`Cannot reach ${c}: ${t}`}}if(p&&u)try{let t=await Promise.race([(0,s.tS)(),new Promise(e=>setTimeout(()=>e(null),8e3))]);e.clobAuth={ok:!!t,label:"CLOB API (auth)",detail:t?"Authenticated � API keys derived from wallet":"Failed � check PRIVATE_KEY and FUNDER_ADDRESS"}}catch(t){e.clobAuth={ok:!1,label:"CLOB API (auth)",detail:`Auth failed: ${t instanceof Error?t.message:t}`}}else e.clobAuth={ok:!1,label:"CLOB API (auth)",detail:"Skipped � env vars not set"};let m=e.envVars.ok&&e.rpc.ok&&e.wallet.ok&&e.clobAuth.ok;return o.NextResponse.json({success:!0,data:{steps:e,readyForLive:m,walletAddress:d||null}})}a()}catch(e){a(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,70,624,925],()=>r(37097));module.exports=a})();