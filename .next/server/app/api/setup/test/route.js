(()=>{var e={};e.id=83,e.ids=[83],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},87529:()=>{},72550:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>A,patchFetch:()=>E,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>v,staticGenerationAsyncStorage:()=>k});var s={};t.r(s),t.d(s,{GET:()=>p,dynamic:()=>d});var o=t(49303),i=t(88716),n=t(60670),a=t(87070),c=t(21925),l=t(63813),u=t(78165);let d="force-dynamic";async function p(){let e={},r=process.env.PRIVATE_KEY,s=process.env.FUNDER_ADDRESS,o=process.env.POLYGON_RPC_URL||"https://polygon-rpc.com",i=process.env.CLOB_API_URL||"https://clob.polymarket.com",n=!!r&&"0x_your_private_key_here"!==r&&r.length>10,d=!!s&&"0x_your_funder_address_here"!==s&&s.length>10;e.envVars={ok:n&&d,label:"Environment Variables",detail:n||d?n?d?"PRIVATE_KEY and FUNDER_ADDRESS configured":"FUNDER_ADDRESS missing from .env.local":"PRIVATE_KEY missing from .env.local":"PRIVATE_KEY and FUNDER_ADDRESS missing from .env.local"};let p="";try{let t=new l.c(o,137),s=await Promise.race([t.getBlockNumber(),new Promise((e,r)=>setTimeout(()=>r(Error("timeout")),5e3))]);n&&(p=new u.w5(r,t).address),e.rpc={ok:!0,label:"Polygon RPC",detail:`Connected (block #${s}) � ${o.includes("polygon-rpc.com")?"? Public RPC (slow)":o.replace(/\/v2\/.*/,"/v2/***")}`}}catch(r){e.rpc={ok:!1,label:"Polygon RPC",detail:`Failed to connect to ${o.replace(/\/v2\/.*/,"/v2/***")}: ${r instanceof Error?r.message:r}`}}if(n&&e.rpc.ok)try{let s=new l.c(o,137),i=new u.w5(r,s),{Contract:n}=await t.e(544).then(t.bind(t,18544)),a=new n("0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",["function balanceOf(address) view returns (uint256)"],s),c=await Promise.race([a.balanceOf(i.address),new Promise((e,r)=>setTimeout(()=>r(Error("timeout")),5e3))]),d=Number(c)/1e6;e.wallet={ok:d>0,label:"Wallet",detail:d>0?`${p.slice(0,6)}...${p.slice(-4)} � $${d.toFixed(2)} USDC`:`${p.slice(0,6)}...${p.slice(-4)} � $0.00 USDC (fund wallet to trade)`}}catch(r){e.wallet={ok:!1,label:"Wallet",detail:`Could not read balance: ${r instanceof Error?r.message:r}`}}else e.wallet={ok:!1,label:"Wallet",detail:n?"RPC not connected":"No PRIVATE_KEY set"};try{let r=(0,c.YX)();await Promise.race([r.getOrderBook("0x0000000000000000000000000000000000000000000000000000000000000001"),new Promise((e,r)=>setTimeout(()=>r(Error("timeout")),5e3))]),e.clobRead={ok:!0,label:"CLOB API (read)",detail:`Connected to ${i}`}}catch(t){let r=t instanceof Error?t.message:String(t);r.includes("404")||r.includes("Not Found")||r.includes("400")?e.clobRead={ok:!0,label:"CLOB API (read)",detail:`Connected to ${i}`}:e.clobRead={ok:!1,label:"CLOB API (read)",detail:`Cannot reach ${i}: ${r}`}}if(n&&d)try{let r=await Promise.race([(0,c.tS)(),new Promise(e=>setTimeout(()=>e(null),8e3))]);e.clobAuth={ok:!!r,label:"CLOB API (auth)",detail:r?"Authenticated � API keys derived from wallet":"Failed � check PRIVATE_KEY and FUNDER_ADDRESS"}}catch(r){e.clobAuth={ok:!1,label:"CLOB API (auth)",detail:`Auth failed: ${r instanceof Error?r.message:r}`}}else e.clobAuth={ok:!1,label:"CLOB API (auth)",detail:"Skipped � env vars not set"};let m=e.envVars.ok&&e.rpc.ok&&e.wallet.ok&&e.clobAuth.ok;return a.NextResponse.json({success:!0,data:{steps:e,readyForLive:m,walletAddress:p||null}})}let m=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/setup/test/route",pathname:"/api/setup/test",filename:"route",bundlePath:"app/api/setup/test/route"},resolvedPagePath:"C:\\Users\\Vilez\\Desktop\\Poly\\polymarket-bot\\src\\app\\api\\setup\\test\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:k,serverHooks:v}=m,A="/api/setup/test/route";function E(){return(0,n.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:k})}},49303:(e,r,t)=>{"use strict";e.exports=t(30517)},43895:(e,r,t)=>{"use strict";t.d(r,{k:()=>u});var s=t(94624),o=t.n(s),i=t(92048),n=t(55315);let a=process.env.LOG_FILE||(0,n.join)(process.cwd(),"data","bot.log"),c=process.env.LOG_LEVEL||"info",l=(0,n.dirname)(a);(0,i.existsSync)(l)||(0,i.mkdirSync)(l,{recursive:!0});let u=o().createLogger({level:c,format:o().format.combine(o().format.timestamp({format:"YYYY-MM-DD HH:mm:ss.SSS"}),o().format.printf(({timestamp:e,level:r,message:t,...s})=>{let o=Object.keys(s).length?` ${JSON.stringify(s)}`:"";return`[${e}] ${r.toUpperCase()}: ${t}${o}`})),transports:[new(o()).transports.Console({format:o().format.combine(o().format.colorize(),o().format.timestamp({format:"HH:mm:ss"}),o().format.printf(({timestamp:e,level:r,message:t})=>`[${e}] ${r}: ${t}`))}),new(o()).transports.File({filename:a,maxsize:10485760,maxFiles:5})]})},21925:(e,r,t)=>{"use strict";t.d(r,{EG:()=>k,L4:()=>f,YX:()=>m,_e:()=>A,pQ:()=>v,tS:()=>p});var s=t(32101),o=t(72019),i=t(78165),n=t(63813),a=t(24263),c=t(43895);a.Z.defaults.headers.common["User-Agent"]="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36",a.Z.defaults.headers.common.Accept="application/json, text/plain, */*",a.Z.defaults.headers.common["Accept-Language"]="en-US,en;q=0.9";let l=null,u=null,d=process.env.POLYGON_RPC_URL||"https://polygon-rpc.com";async function p(){if(l)return l;let e=process.env.PRIVATE_KEY,r=process.env.FUNDER_ADDRESS,t=process.env.CLOB_API_URL||"https://clob.polymarket.com",o=parseInt(process.env.CHAIN_ID||"137"),a=parseInt(process.env.SIGNATURE_TYPE||"0");if(!e||!r)return c.k.warn("No PRIVATE_KEY or FUNDER_ADDRESS set — live trading unavailable"),null;try{let p=new n.c(d,137),m=new i.w5(e,p),f=process.env.CLOB_API_KEY,k=process.env.CLOB_SECRET,v=process.env.CLOB_PASSPHRASE;if(f&&k&&v)u={key:f,secret:k,passphrase:v},c.k.info("Using pre-configured CLOB API keys from .env");else{let e=new s.R(t,o,m,void 0,a,r);u=await e.createOrDeriveApiKey(),c.k.info("API keys derived from Polymarket")}return l=new s.R(t,o,m,u,a,r),c.k.info("CLOB client initialized successfully"),l}catch(e){return c.k.error(`Failed to initialize CLOB client: ${e}`),null}}function m(){let e=process.env.CLOB_API_URL||"https://clob.polymarket.com",r=parseInt(process.env.CHAIN_ID||"137");return new s.R(e,r)}async function f(e,r,t,s,i){let n=await p();if(!n)return{success:!1,error:"CLOB client not initialized"};try{let a=await n.createAndPostOrder({tokenID:e,price:r,side:o.MF.BUY,size:t,feeRateBps:void 0,nonce:void 0,expiration:void 0},{tickSize:s,negRisk:i});return c.k.info(`Buy order placed: ${t} shares @ $${r} | token=${e}`),{success:!0,orderId:a?.orderID||a?.orderIds?.[0]||"unknown"}}catch(r){let e=r instanceof Error?r.message:String(r);return c.k.error(`Buy order failed: ${e}`),{success:!1,error:e}}}async function k(e,r,t,s,i){let n=await p();if(!n)return{success:!1,error:"CLOB client not initialized"};try{let a=await n.createAndPostOrder({tokenID:e,price:r,side:o.MF.SELL,size:t,feeRateBps:void 0,nonce:void 0,expiration:void 0},{tickSize:s,negRisk:i});return c.k.info(`Sell order placed: ${t} shares @ $${r} | token=${e}`),{success:!0,orderId:a?.orderID||a?.orderIds?.[0]||"unknown"}}catch(r){let e=r instanceof Error?r.message:String(r);return c.k.error(`Sell order failed: ${e}`),{success:!1,error:e}}}async function v(e,r,t,s,i){let n=await p();if(!n)return{success:!1,error:"CLOB client not initialized"};try{let a=await n.createAndPostOrder({tokenID:e,price:r,side:o.MF.BUY,size:t,feeRateBps:void 0,nonce:void 0,expiration:void 0},{tickSize:s,negRisk:i},o.mr.GTC,!1,!0);return c.k.info(`[ARB] Limit buy placed: ${t.toFixed(2)} shares @ $${r} | token=${e}`),{success:!0,orderId:a?.orderID||a?.orderIds?.[0]||"unknown"}}catch(r){let e=r instanceof Error?r.message:String(r);return c.k.error(`[ARB] Limit buy failed: ${e}`),{success:!1,error:e}}}async function A(e){let r=await p();if(!r)return{success:!1,error:"CLOB client not initialized"};try{return await r.cancelOrders(e),c.k.info(`[ARB] Cancelled ${e.length} orders`),{success:!0}}catch(r){let e=r instanceof Error?r.message:String(r);return c.k.error(`[ARB] Batch cancel failed: ${e}`),{success:!1,error:e}}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,70,893],()=>t(72550));module.exports=s})();